# Windows Processes
* A process is a resource mechanism used to represent a running instance of a program.

## Sysinternals Tools
* [Sysinternals](https://docs.microsoft.com/en-us/sysinternals/) is a suite of free tools that are useful to manage, diagnose, troubleshoot and monitor a Windows environment.
* Good Resources to master Sysinternals : 
   1. Troubleshooting with the Windows Sysinternals Tools by Mark Russinovich and Aaron Margosis
   2. Mark Russinovich's [blog](https://techcommunity.microsoft.com/t5/windows-blog-archive/bg-p/Windows-Blog-Archive/label-name/Mark%20Russinovich)

* Tools

| Name | Function |
|---|---|
| Process Explorer | Advanced Task Manager that could be used to learn more about processes that are active. <br>* helps in tracking DLL and handles that are opened by a process. <br>* could be used for troubleshooting systems and memory leaks |
| WinObj | A tool that uses the NTDLL.dll Win32 API to access and display information on the NT Object Manager's namespace |
| ListDLLs.exe | A tool that display DLLs that are loaded into a process |
| Handles.exe | A tool to list handles of a process |
| Procmon | An advanced process monitoring tool that could show in real time processes and threads. |


# Windows API
* WinAPIs are sets of functions and data structures that demands the Windows OS to perform some functionalities.
* Windows programs usually rely on these API functions to work.

## [Process Injection Techniques](https://github.com/irboi746/Malware-Analysis-Notes/tree/main/Dynamic_Analysis/Windows_Process_&_APIs/Process_Injection_Techniques)
* Process injection is used by malware to evade detection.
* It involves executing custom code within another process address space to improve stealth and achieve persistence (think process migration in metasploit)
* Below is a list of common injection techniques : 

| S/N | Technique Name                                  | S/N | Technique Name                                                                              |
|-----|-------------------------------------------------|-----|---------------------------------------------------------------------------------------------|
| 1   | DLL Injection                                   | 6   | Injection via Registry Modifications                                                        |
| 2   | PE Injection                                    | 7   | APC Injection                                                                               |
| 3   | Process Hollowing, Process Replacement or RunPE | 8   | Extra Window Memory Injection (EWMI)                                                        |
| 4   | Thread Execution Hijacking                      | 9   | Early Bird API Injection                                                                    |
| 5   | Injection via Hooks (SetWindowsHookEx)          | 10  | API Hooking Techniques:  <br>* Inline API Hooking <br>* Inline API Hooking with Trampoline <br>* IAT Hooking |

## Common APIs used by Malware
* Keystroke Loggers
* Network Traffic Monitoring
* Downloaders
* HTTP C2 Traffic
* Dropper
* DLL Injection Function Calls
* Process Hollowing
* Anti-Debug/Anti-VM
